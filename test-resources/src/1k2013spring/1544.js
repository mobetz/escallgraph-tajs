b.style.margin=0;b.style.overflow='hidden';b.style.background='#111';v=0;t=0;$='';k=[];for(x=0;x<80;++x){k[x]=[];for(y=0;y<25;++y)k[x][y]=0}n=function(e){v=0;if(++t>23){--t;for(x=0;x<80;++x)for(y=0;y<24;++y)k[x][y]=k[x][y+1]}};p=function(e){if(e==10)return n();k[v++][t]=e;if(v>79)n()};p(62);p(0);A=function(e){if($.length>0&&(v>0||t>0)){$=$.substr(0,$.length-1);if(--v<0)v=79,--t;k[v][t]=0;}};ex=function(e){try{w=eval($)}catch(e){w=e}w=new String(w);for(r in w)p(w.charCodeAt(r))};b.onkeypress=function(e){if(e.charCode&&e.charCode!=13)$+=String.fromCharCode(e.charCode),p(e.charCode)};b.onkeydown=function(e){if(e.keyCode==13){if($=='')return;n();ex();$='';n();p(62);p(0)}if(e.keyCode==8)A()};f=[];for(e=0;e<20;++e){u=document.createElement('canvas');C=u.getContext('2d');u.width=u.height=400;x=C.createImageData(400,400);for(r in x.data){x.data[r]=Math.floor(70*Math.random())}C.putImageData(x,0,0);f[e]=u}B=0;g=[];for(e=0;e<256;++e){u=document.createElement('canvas');C=u.getContext('2d');u.width=9;u.height=12;C.fillStyle='#080';C.font='9px';C.textAlign='center';C.fillText(String.fromCharCode(e),4,9);g[e]=u};o=function(e){w=c.width=innerWidth;h=c.height=innerHeight;with(a){save();translate(Math.random(),Math.floor(Math.random()*Math.random()*3));drawImage(f[B++],0,0,w,h);B%=20;w/=80;h/=27;for(x=0;x<80;++x)for(y=0;y<24;++y)drawImage(g[k[x][y]],w*x,h*y,w,h);drawImage(g[95],w*v,h*t,w,h);restore();setTimeout(o,x)}};o()