var m = [
    [// high
        // intro
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        // transition
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        // part 1
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        2.6, 4.6, 5.6,
        4.2, 5.2, 4.2, 2.6, 4.6, 2.6, 4.2, 5.2, 4.2,
        // part 2
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        2.6, 4.6, 5.6,
        4.2, 5.2, 4.2, 2.6, 4.6, 2.6, 4.2, 5.2, 7.2,
        // part 3
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        2.6, 4.6, 5.6,
        4.2, 5.2, 4.2, 2.6, 4.6, 2.6, 4.2, 5.2, 4.2,
        // part 4
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        2.6, 4.6, 5.6,
        4.2, 5.2, 4.2, 2.6, 4.6, 2.6, 4.2, 5.2, 4.2,
        // part 5
        12.6, 12.6, 12.2, 9.4,
        12.2, 12.2, 12.2,
        12.6, 12.6, 12.2, 9.4,
        12.2, 12.2, 12.2,
        12.6, 12.6, 12.2, 9.4,
        '.30',
        // part 6
        12.6, 14.6, 12.6,
        16.2, 17.2, 16.2,
        12.6, 14.6, 12.6,
        16.2, 17.2, 16.2,
        14.6, 16.6, 14.6,
        16.2, 17.2, 16.2, 14.2, 12.2, 14.2, 16.2, 17.2, 16.2, 14.2, 12.2, 14.2, 16.2, 17.2, 16.2,
        // part 7
        12.6, 14.6, 12.6,
        16.2, 17.2, 16.2,
        12.6, 14.6, 12.6,
        16.2, 17.2, 16.2,
        14.6, 16.6, 14.6,
        16.2, 17.2, 16.2, 14.2, 12.2, 14.2, 16.2, 17.2, 16.2, 14.2, 12.2, 14.2, 16.2, 17.2, 16.2,
        // part 8
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        0.6, 2.6, 0.6,
        2.2, 2.2, 2.2,
        2.6, 4.6, 5.6,
        4.2, 5.2, 4.2, 2.6, 4.6, 2.6, 4.2, 5.2, 4.2,
        // end
        0.6, 2.6, 0.6
    ],
    [// medium
        // intro
        0.24, -3.24, 0.24, -3.24,
        // transition
        '.24',
        // part 1
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        2.6, 4.6, 2.6,
        4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2,
        // part 2
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        2.6, 4.6, 2.6,
        4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 7.2,
        // part 3
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        2.6, 4.6, 5.6,
        4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2,
        // part 4
        0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 7.2, '4.10',
        0.2, 0.2, 0.2, 0.2, 0.2, 2.2, 0.2, '-3.10',
        2.2, 2.2, 2.2, 2.2, 2.2, 4.2, '2.14',
        0.2, 2.2, 4.2, 5.6,
        0.2, 2.2, 4.2, 5.2, 7.2,
        // part 5
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        2.6, 4.6, 2.6,
        4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2,
        // part 6
        0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 7.2, '4.10',
        0.2, 0.2, 0.2, 0.2, 0.2, 2.2, 0.2, '-3.10',
        2.2, 2.2, 2.2, 2.2, 2.2, 4.2, '2.14',
        0.2, 2.2, 4.2, 5.6,
        0.2, 2.2, 4.2, 5.2, 7.2,
        // part 7
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        2.6, 4.6, 2.6,
        4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2,
        // part 8
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        2.6, 4.6, 2.6,
        4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2,
        // end
        0.6, 2.6, 0.6
    ],
    [// low
        // part 1, 2, 3
        '.408',
        // part 4
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        0.6, 2.6, 0.6,
        4.2, 5.2, 4.2,
        2.6, 4.6, 2.6,
        4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 4.2, 2.2, 0.2, 2.2, 4.2, 5.2, 7.2,
        // part 5, 6, 7, 8
        '.384',
        // end
        0.6, 2.6, 0.6
    ]
];


var context = new webkitAudioContext( );
var precision = 44100;
var M = Math;
m.forEach( function ( instrument, a ) {
    var t = 5;
    instrument.forEach( function ( note ) {
        note = ( note + '' ).split( '.' );
        var duration = M.abs( parseInt( note[ 1 ] ) / 6 );
        var Hz = M.pow( 2, parseInt( note[ 0 ] ) / 12 - a ) * 440;
        var i = M.round( precision * duration );
        if ( Hz ) {
            var frames = new Float32Array( i );
            var buffer = context.createBuffer( 1, i, precision );
            while ( i-- ) {  
                frames[ i ] = M.cos( i * M.PI * 2 / precision * Hz );
            }
            buffer.gain = .1;
            buffer.getChannelData( 0 ).set( frames );
            var source = context.createBufferSource( );
            source.buffer = buffer;
            source.connect( context.destination );
            source.noteOn( t );
        }
        t += duration;
    } );
} );